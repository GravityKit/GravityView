!function($){"use strict";function ViewDropDown(el){this.initialized=!1,this.$el=$(el),this.open=!1,this.init(),this.renderOptions(),this.refresh()}ViewDropDown.prototype.init=function(){var $el,dropdown;this.initialized||($el=this.$el,(dropdown=this).storeValue(),$el.css({display:"none"}),$el.wrap($('<div class="view-dropdown"></div>')),this.$wrapper=$el.closest("div.view-dropdown"),this.$options_wrapper=$(' <div class="view-dropdown-options"></div>'),this.$wrapper.append(this.$options_wrapper),this.$el.data("scope")&&this.$options_wrapper.append($('<div class="view-dropdown-options__header"><span>'+this.$el.data("scope")+" â€” "+this.$el.data("label")+"</span></div>")),this.$options_list=$('<div class="view-dropdown-list"></div>'),this.$options_wrapper.append($('<div class="view-dropdown-options__body"></div>').append(this.$options_list)),this.$options_wrapper.append($('<div class="view-dropdown-options__footer">\t<a target="_blank" href="#">Learn more about view types &amp; layouts</a></div>')),this.select=$('<div tabindex="0" role="listbox" class="view-dropdown-select">\t<div class="view-dropdown-select__value">\t\t<div class="view-dropdown-select__value__icon"></div>\t\t<span class="view-dropdown-select__value__label">'+this.$el.data("label")+':</span>\t\t<span class="view-dropdown-select__value__selection"></span>\t</div>\t<div class="view-dropdown-select__toggle">\t\t<div class="view-dropdown-toggle__chevron"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 12.5L10 7.5L15 12.5" stroke="#667085" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"/></svg></div>\t</div></div>').insertAfter(this.$el),$(document.body).on("keyup",function(e){dropdown.open&&"Escape"===e.key&&dropdown.close()}).on("keydown",function(e){dropdown.open&&-1===["Meta","Control","Shift","r","R","c","C","F5"].indexOf(e.key)&&e.preventDefault(),-1<[" ","Enter","Tab"].indexOf(e.key)&&0<dropdown.$options_list.find(":focus").length&&e.preventDefault(),-1<["Enter"," ","ArrowUp","ArrowDown"].indexOf(e.key)&&dropdown.select.has(":focus")&&e.preventDefault()}),$(this.select).on("click",$.proxy(this.toggle,dropdown)).on("keyup",$.proxy(this.handleKeySelect,this)),$el.on("change",function(){dropdown.close()}),$(this.$options_list).on("click","div.view-dropdown-list-item",function(){$el.val($(this).data("value")),$el.trigger("change"),dropdown.focus()}).on("keyup","div.view-dropdown-list-item",$.proxy(this.handleKeyOption,this)),this.initialized=!0)},ViewDropDown.prototype.focus=function(){this.select.focus()},ViewDropDown.prototype.focusFirst=function(){this.open&&this.$options_list.find(".view-dropdown-list-item:first-child").focus()},ViewDropDown.prototype.focusLast=function(){this.open&&this.$options_list.find(".view-dropdown-list-item:last-child").focus()},ViewDropDown.prototype.focusUp=function(){var $previous;this.open&&(!($previous=this.$options_list.find(":focus")).length||($previous=0===($previous=$previous.prev(".view-dropdown-list-item")).length?this.$options_list.find(".view-dropdown-list-item:last-child"):$previous)&&$previous.focus())},ViewDropDown.prototype.focusDown=function(){var $next;this.open&&(!($next=this.$options_list.find(":focus")).length||($next=0===($next=$next.next(".view-dropdown-list-item")).length?this.$options_list.find(".view-dropdown-list-item:first-child"):$next)&&$next.focus())},ViewDropDown.prototype.handleKeySelect=function(e){e.preventDefault(),-1<["Enter"," ","ArrowUp","ArrowDown"].indexOf(e.key)&&this.toggle()},ViewDropDown.prototype.handleKeyOption=function(e){e.preventDefault(),"Enter"===e.key||" "===e.key?($(e.target).trigger("click"),this.close()):"ArrowUp"===e.key?this.focusUp():"ArrowDown"===e.key?this.focusDown():"Tab"===e.key?!0===e.shiftKey?this.focusUp():this.focusDown():"Home"===e.key?this.focusFirst():"End"===e.key&&this.focusLast()},ViewDropDown.prototype.storeValue=function(){this.$el.data("gv-view-value",this.$el.val())},ViewDropDown.prototype.restoreValue=function(){this.$el.val(this.$el.data("gv-view-value")),this.refresh()},ViewDropDown.prototype.renderOptions=function(){var $list=this.$options_list;$list.html(),this.$el.find("option").each(function(){var icon,id,$item=$(this);""!==$item.val()&&(icon="",$item.data("icon")&&(icon='<img src="'+$item.data("icon")+'" alt="Icon" />'),id="view-option-"+(Math.random()+1).toString(36).substring(2),$item=$('<div tabindex="0" id="'+id+'" role="option" aria-selected="false" class="view-dropdown-list-item" data-value="'+$item.val()+'">\t<div class="view-dropdown-list-item__icon">'+icon+'</div>\t<div class="view-dropdown-list-item__value">\t\t<div class="view-dropdown-list-item__label">'+$item.data("title")+'</div>\t\t<div class="view-dropdown-list-item__description">'+$item.data("description")+"</div>\t</div></div>"),$list.append($item))})},ViewDropDown.prototype.toggle=function(){this.open=!this.open,this.refresh(),this.open&&this.$options_list.find("div.view-dropdown-list-item--active").focus()},ViewDropDown.prototype.close=function(){this.open=!1,this.refresh()},ViewDropDown.prototype.refresh=function(){this.$wrapper.toggleClass("view-dropdown--open",this.open);var value=this.$el.val(),$option=this.$el.find('option[value="'+value+'"]'),title=$option[0]?.innerText||"Select an option",icon="";$option.data("icon")&&(icon='<img src="'+$option.data("icon")+'" alt="Icon" />');var dropdown=this;value&&(title=$option.data("title"),this.$options_list.find("div.view-dropdown-list-item").each(function(){var active=$(this).data("value")===value;$(this).toggleClass("view-dropdown-list-item--active",$(this).data("value")===value).attr("aria-selected",active?"true":"false"),active&&dropdown.select.attr("aria-activedescendant",$(this).attr("id"))})),this.select.find(".view-dropdown-select__value__selection").html(title),this.select.find(".view-dropdown-select__value__icon").html(icon)},$.fn.extend({viewDropdown:function(){$(this).data("view-dropdown")||$(this).data("view-data",new ViewDropDown(this))}}),$(function(){$("select.view-dropdown").each(function(){$(this).viewDropdown()})})}(jQuery);