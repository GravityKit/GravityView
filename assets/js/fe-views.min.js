jQuery(function($){({init:function(){this.datepicker(),$(".gv-widget-search").each(function(){$(this).attr("data-state",$(this).serialize())}),$(".gv-widget-search").on("keyup, change",this.form_changed),$(".gv-widget-search .gv-search-field-search_all input[type=search]").on("search",function(e){$(e.target).parents("form").trigger("keyup")}),$(".gv-search-clear").on("click",this.clear_search),$("a.gv-sort").on("click",this.multiclick_sort),this.number_range()},form_changed:function(e){e=$(e.target).hasClass("gv-widget-search")?$(e.target):$(e.target).parents("form");e.serialize()===e.attr("data-state")?e.hasClass("gv-is-search")?$(".gv-search-clear",$(this)).text(gvGlobals.clear):$(".gv-search-clear",$(this)).fadeOut(100):$(".gv-search-clear",$(this)).text(gvGlobals.reset).fadeIn(100)},clear_search:function(e){var $form=$(this).parents("form"),changed=$form.attr("data-state")!==$form.serialize();return!(!$form.hasClass("gv-is-search")||changed)||!changed||(e.preventDefault(),$form.trigger("reset"),!1===$form.hasClass("gv-is-search")?$(".gv-search-clear",$form).hide(100):$(".gv-search-clear",$form).text(gvGlobals.clear),!1)},datepicker:function(){jQuery.fn.datepicker&&$(".gv-datepicker").each(function(){var element=jQuery(this),image="",showOn="focus";element.hasClass("datepicker_with_icon")&&(showOn="both",image=jQuery("#gforms_calendar_icon_"+this.id).val()),gvGlobals.datepicker.showOn=showOn,gvGlobals.datepicker.buttonImage=image,gvGlobals.datepicker.buttonImageOnly=!0,gvGlobals.datepicker.dateFormat||(showOn="mm/dd/yy",element.hasClass("mdy")?showOn="mm/dd/yy":element.hasClass("dmy")?showOn="dd/mm/yy":element.hasClass("dmy_dash")?showOn="dd-mm-yy":element.hasClass("dmy_dot")?showOn="dd.mm.yy":element.hasClass("ymd_slash")?showOn="yy/mm/dd":element.hasClass("ymd_dash")?showOn="yy-mm-dd":element.hasClass("ymd_dot")&&(showOn="yy.mm.dd"),gvGlobals.datepicker.dateFormat=showOn),element.datepicker(gvGlobals.datepicker)})},multiclick_sort:function(e){e.shiftKey&&(e.preventDefault(),location.href=$(this).data("multisort-href"))},number_range(){$(".gv-search-number-range").on("change","input",function(){var $name=$(this).attr("name");let current_type=$name.includes("max")?"max":"min",other_type="max"==current_type?"min":"max",$other=$(this).closest(".gv-search-number-range").find('input[name="'+$name.replace(/(min|max)/,other_type)+'"]');setTimeout(function(){var value;$(this).attr(other_type)&&""!==$(this).val()&&(value=parseFloat($(this).val()),"max"==current_type&&value<parseFloat($(this).attr("min"))?$(this).val($(this).attr("min")):"min"==current_type&&value>parseFloat($(this).attr("max"))&&$(this).val($(this).attr("max"))),$other.attr(current_type,$(this).val())}.bind(this),2)}).find("input").trigger("change")}}).init()});