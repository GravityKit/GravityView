($=>{let activateGrid=selector=>{$(selector).find(".gv-grid > .gv-grid-rows-container").each((i,grid)=>{var options={handle:"> .gv-grid-row-actions > .gv-grid-row-handle",items:"> .gv-grid-row.is-sortable",distance:2,revert:75,placeholder:"grid-row-placeholder",forcePlaceholderSize:!0,receive:function(event,ui){let sender_area=ui.sender.closest(".gv-grid").data("grid-context"),receiver_area=$(this).closest(".gv-grid").data("grid-context");ui.item.attr("data-context",receiver_area),ui.item.find("[data-context]").attr("data-context",receiver_area),ui.item.find("[data-areaid]").attr("data-areaid",(_,area_id)=>area_id.replace(sender_area+"_",receiver_area+"_")),ui.item.find('[name*="['+sender_area+'_"]').each(function(){var name=$(this).attr("name");$(this).attr("name",name.replace("["+sender_area+"_","["+receiver_area+"_"))})}};let connectWith=$(grid).closest(".gv-grid").data("grid-connect");void 0!==connectWith&&(options.connectWith='[data-grid-connect="'+connectWith+'"] > .gv-grid-rows-container',options.start=()=>{$(selector).find('[data-grid-connect="'+connectWith+'"]').addClass("is-receivable")},options.stop=()=>{$(selector).find('[data-grid-connect="'+connectWith+'"]').removeClass("is-receivable")}),$(grid).sortable(options)})};$(()=>{activateGrid(document),void 0!==window?.gvAdminActions&&(window.gvAdminActions.activateGrid=activateGrid),$(document).on("click",".gv-grid-row-delete",function(){let $row=$(this).closest(".gv-grid-row"),$fields=$row.find(".gv-fields");0<$fields.length&&!confirm($(this).data("confirm"))||$row.fadeOut("fast",()=>{$fields.each(function(){$(this).remove(),$(document.body).trigger("gravityview/field-removed",$(this))}),$row.remove(),$(document.body).trigger("gravityview/row-removed",$row)})}),$(document).on("click",".gv-grid-add-row .gv-toggle",function(e){var $add_row=$(this).closest(".gv-grid-add-row");$add_row.toggleClass("open"),$(this).attr("aria-expanded",$add_row.hasClass("open"))}).on("click",".gv-grid-add-row [data-add-row]",function(e){var $add_row_button=$(this);let $add_row=$(this).closest(".gv-grid-add-row"),zone=$add_row_button.data("add-row"),template_id=$add_row_button.data("template-id"),type=$add_row_button.data("type"),row_type=$add_row_button.data("row-type");$.post(ajaxurl,{action:"gv_create_row",template_id:template_id,nonce:gvGlobals.nonce,zone:zone,type:type,row_type:row_type,dataType:"json"}).always(()=>{$add_row.removeClass("open"),$add_row.find(".gv-toggle").attr("aria-expanded",!1)}).done(response=>{response=JSON.parse(response),response=$(response?.row);response.appendTo($add_row.closest(".gv-grid").find("> .gv-grid-rows-container")),$(document.body).trigger("gravityview/row-added",response,{type:type,row_type:row_type,zone:zone,template_id:template_id}),window?.gvAdminActions?.initTooltips(),window?.gvAdminActions?.initDroppables(response)})})})})(jQuery);