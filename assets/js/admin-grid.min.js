($=>{$(()=>{$(document).find(".gv-grid").sortable({handle:".gv-grid-row-handle",items:"> .gv-grid-row.is-sortable",distance:2,revert:75,placeholder:"grid-row-placeholder",forcePlaceholderSize:!0}),$(document).on("click",".gv-grid-row-delete",function(){const $row=$(this).closest(".gv-grid-row"),$fields=$row.find(".gv-fields");0<$fields.length&&!confirm($(this).data("confirm"))||$row.fadeOut("fast",()=>{$fields.each(function(){$(this).remove(),$(document.body).trigger("gravityview/field-removed",$(this))}),$row.remove(),$(document.body).trigger("gravityview/row-removed",$row)})}),$(".gv-grid-add-row").on("click",".gv-toggle",function(e){$(e.delegateTarget).toggleClass("open"),$(this).attr("aria-expanded",$(e.delegateTarget).hasClass("open"))}).on("click","[data-add-row]",function(e){const $add_row_button=$(this);var zone=$add_row_button.data("add-row"),template_id=$add_row_button.data("template-id"),type=$add_row_button.data("type"),row_type=$add_row_button.data("row-type");$.post(ajaxurl,{action:"gv_create_row",template_id:template_id,nonce:gvGlobals.nonce,zone:zone,type:type,row_type:row_type,dataType:"json"}).always(()=>{$(e.delegateTarget).removeClass("open"),$(e.delegateTarget).find(".gv-toggle").attr("aria-expanded",!1)}).done(result=>{result=JSON.parse(result);const $row=$(result?.row);$row.insertBefore($(e.delegateTarget)),window?.gvAdminActions?.initTooltips(),window?.gvAdminActions?.initDroppables($row)})})})})(jQuery);