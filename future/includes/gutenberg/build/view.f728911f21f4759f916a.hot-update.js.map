{"version":3,"file":"view.f728911f21f4759f916a.hot-update.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAqC;AACH;AACkB;AACR;AAE7B,SAASK,iBAAiBA,CAAAC,IAAA,EAItC;EAAAC,EAAA;EAAA,IAHFC,MAAM,GAAAF,IAAA,CAANE,MAAM;IACNC,SAAQ,GAAAH,IAAA,CAARG,QAAQ;IACRC,SAAS,GAAAJ,IAAA,CAATI,SAAS;EAET,IAAMC,MAAM,GAAG;IACdC,eAAe,EAAEZ,mDAAE,CAAC,qBAAqB,EAAE,gBAAgB,CAAC;IAC5Da,IAAI,EAAEb,mDAAE,CAAC,YAAY,EAAE,gBAAgB;EACxC,CAAC;EAED,IAAMc,aAAa,GAAG;IAAEC,KAAK,EAAE,EAAE;IAAEC,KAAK,EAAEL,MAAM,CAACC;EAAgB,CAAC;EAElE,IAAAK,SAAA,GAA8Bb,+CAAQ,CAAC,CAACU,aAAa,CAAC,CAAC;IAAAI,UAAA,GAAAC,gFAAA,CAAAF,SAAA;IAAhDG,OAAO,GAAAF,UAAA;IAAEG,UAAU,GAAAH,UAAA;EAC1B,IAAAI,UAAA,GAAkDlB,+CAAQ,CAACU,aAAa,CAAC;IAAAS,UAAA,GAAAJ,gFAAA,CAAAG,UAAA;IAAlEE,iBAAiB,GAAAD,UAAA;IAAEE,oBAAoB,GAAAF,UAAA;EAE9C,IAAMG,SAAS;IAAA,IAAAC,KAAA,GAAAC,mFAAA,eAAAC,sEAAA,CAAG,SAAAE,QAAOvB,MAAM;MAAA,IAAAwB,QAAA,EAAAC,IAAA,EAAAC,MAAA,EAAAC,GAAA,EAAAC,cAAA,EAAAC,UAAA,EAAAC,cAAA;MAAA,OAAAT,sEAAA,UAAAW,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAE,IAAA;YAAA,OAENC,KAAK,CAACC,mBAAmB,CAACC,QAAQ,EAAE;cAC1DC,MAAM,EAAE,MAAM;cACdC,OAAO,EAAE;gBACR,cAAc,EAAE;cACjB,CAAC;cACDC,IAAI,EAAE,IAAIC,eAAe,CAAC;gBACzBC,MAAM,EAAE,oBAAoB;gBAC5BC,KAAK,EAAEP,mBAAmB,CAACO,KAAK;gBAChCC,MAAM,EAAE7C;cACT,CAAC;YACF,CAAC,CAAC;UAAA;YAVIwB,QAAQ,GAAAS,QAAA,CAAAa,IAAA;YAAA,MAYVtB,QAAQ,CAACuB,MAAM,KAAK,GAAG;cAAAd,QAAA,CAAAE,IAAA;cAAA;YAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OACPX,QAAQ,CAACC,IAAI,CAAC,CAAC;UAAA;YAA5BA,IAAI,GAAAQ,QAAA,CAAAa,IAAA;YACJpB,MAAM,GAAG,IAAIsB,SAAS,CAAC,CAAC;YACxBrB,GAAG,GAAGD,MAAM,CAACuB,eAAe,CAACxB,IAAI,EAAE,WAAW,CAAC;YAC/CG,cAAc,GAAGD,GAAG,CAACuB,gBAAgB,CAAC,QAAQ,CAAC;YAC/CrB,UAAU,GAAGsB,KAAK,CAACC,IAAI,CAACxB,cAAc,CAAC,CAACyB,GAAG,CAAC,UAACC,MAAM;cAAA,OAAM;gBAC9D/C,KAAK,EAAE+C,MAAM,CAAC/C,KAAK;gBACnBC,KAAK,EAAE8C,MAAM,CAACC;cACf,CAAC;YAAA,CAAC,CAAC;YAEH1C,UAAU,EAAEP,aAAa,EAAAkD,MAAA,CAAAC,oFAAA,CAAK5B,UAAU,EAAC,CAAC;YACpCC,cAAc,GACnBD,UAAU,CAAC6B,IAAI,CAAC,UAACJ,MAAM;cAAA,OAAKA,MAAM,CAAC/C,KAAK,KAAKL,SAAS;YAAA,EAAC,IACvDI,aAAa;YACdW,oBAAoB,CAACa,cAAc,CAAC;YAACG,QAAA,CAAAE,IAAA;YAAA;UAAA;YAErCwB,OAAO,CAACC,KAAK,CAAC,QAAQ,EAAEpC,QAAQ,CAAC;UAAC;YAAAS,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAA4B,EAAA,GAAA5B,QAAA;YAGnC0B,OAAO,CAACC,KAAK,CAAC,cAAc,EAAA3B,QAAA,CAAA4B,EAAO,CAAC;UAAC;UAAA;YAAA,OAAA5B,QAAA,CAAA6B,IAAA;QAAA;MAAA,GAAAvC,OAAA;IAAA,CAEtC;IAAA,gBAnCKL,SAASA,CAAA6C,EAAA;MAAA,OAAA5C,KAAA,CAAA6C,KAAA,OAAAC,SAAA;IAAA;EAAA,GAmCd;EAEDtE,gDAAS,CAAC,YAAM;IACfuB,SAAS,CAAClB,MAAM,CAAC;EAClB,CAAC,EAAE,CAACA,MAAM,CAAC,CAAC;EAEZ,OACCkE,oDAAA,CAACxE,8DAAW;IAACyE,SAAS,EAAC,qBAAqB;IAAC3D,KAAK,EAAEL,MAAM,CAACE;EAAK,GAC/D6D,oDAAA,CAACzE,oDAAM;IACN,cAAYU,MAAM,CAACE,IAAK;IACxB+D,WAAW,EAAEjE,MAAM,CAACC,eAAgB;IACpCiE,gBAAgB,EAAEC,QAAQ,CAAC7B,IAAK;IAChC8B,MAAM,EAAE;MAAEC,UAAU,EAAE,SAAAA,WAACC,IAAI;QAAA,OAAAC,aAAA,CAAAA,aAAA,KAAWD,IAAI;UAAEE,MAAM,EAAE;QAAE;MAAA;IAAI,CAAE;IAC5D/D,OAAO,EAAEA,OAAQ;IACjBL,KAAK,EAAES,iBAAkB;IACzBf,QAAQ,EAAE,SAAAA,SAAC2E,CAAC,EAAK;MAChB3E,SAAQ,CAAC2E,CAAC,CAACrE,KAAK,CAAC;MACjBU,oBAAoB,CAAC2D,CAAC,CAAC;IACxB,CAAE;IACFC,gBAAgB,EAAE,SAAAA,iBAAA;MAAA,OAAMrF,mDAAE,CAAC,yBAAyB,EAAE,gBAAgB,CAAC;IAAA;EAAC,CACxE,CACW,CAAC;AAEhB;AAACO,EAAA,CAzEuBF,iBAAiB;AAAAiF,EAAA,GAAjBjF,iBAAiB;AAAA,IAAAiF,EAAA;AAAAC,sCAAA,CAAAD,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCLzC,qCAAqC","sources":["webpack://gk-gravityview-blocks/./shared/js/sort-selector.js","webpack://gk-gravityview-blocks/webpack/runtime/getFullHash"],"sourcesContent":["import { __ } from \"@wordpress/i18n\";\nimport Select from \"react-select\";\nimport { BaseControl } from \"@wordpress/components\";\nimport { useEffect, useState } from \"react\";\n\nexport default function SortFieldSelector({\n\tviewId,\n\tonChange,\n\tsortField,\n}) {\n\tconst labels = {\n\t\tselectSortField: __(\"Select a Sort Field\", \"gk-gravityview\"),\n\t\tsort: __(\"Sort Field\", \"gk-gravityview\"),\n\t};\n\n\tconst defaultOption = { value: \"\", label: labels.selectSortField };\n\n\tconst [options, setOptions] = useState([defaultOption]);\n\tconst [selectedSortField, setSelectedSortField] = useState(defaultOption);\n\n\tconst fetchData = async (viewId) => {\n\t\ttry {\n\t\t\tconst response = await fetch(gkGravityViewBlocks.ajax_url, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t},\n\t\t\t\tbody: new URLSearchParams({\n\t\t\t\t\taction: \"gv_sortable_fields\",\n\t\t\t\t\tnonce: gkGravityViewBlocks.nonce,\n\t\t\t\t\tviewid: viewId,\n\t\t\t\t}),\n\t\t\t});\n\n\t\t\tif (response.status === 200) {\n\t\t\t\tconst text = await response.text();\n\t\t\t\tconst parser = new DOMParser();\n\t\t\t\tconst doc = parser.parseFromString(text, \"text/html\");\n\t\t\t\tconst optionElements = doc.querySelectorAll(\"option\");\n\t\t\t\tconst newOptions = Array.from(optionElements).map((option) => ({\n\t\t\t\t\tvalue: option.value,\n\t\t\t\t\tlabel: option.textContent,\n\t\t\t\t}));\n\n\t\t\t\tsetOptions([defaultOption, ...newOptions]);\n\t\t\t\tconst selectedOption =\n\t\t\t\t\tnewOptions.find((option) => option.value === sortField) ||\n\t\t\t\t\tdefaultOption;\n\t\t\t\tsetSelectedSortField(selectedOption);\n\t\t\t} else {\n\t\t\t\tconsole.error(\"Error:\", response);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Fetch error:\", error);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfetchData(viewId);\n\t}, [viewId]);\n\n\treturn (\n\t\t<BaseControl className=\"sort-field-selector\" label={labels.sort}>\n\t\t\t<Select\n\t\t\t\taria-label={labels.sort}\n\t\t\t\tplaceholder={labels.selectSortField}\n\t\t\t\tmenuPortalTarget={document.body}\n\t\t\t\tstyles={{ menuPortal: (base) => ({ ...base, zIndex: 10 }) }}\n\t\t\t\toptions={options}\n\t\t\t\tvalue={selectedSortField}\n\t\t\t\tonChange={(e) => {\n\t\t\t\t\tonChange(e.value);\n\t\t\t\t\tsetSelectedSortField(e);\n\t\t\t\t}}\n\t\t\t\tnoOptionsMessage={() => __(\"No Sorting Fields found\", \"gk-gravityview\")}\n\t\t\t/>\n\t\t</BaseControl>\n\t);\n}\n","__webpack_require__.h = function() { return \"6cbe0cac60e10f652b9a\"; }"],"names":["__","Select","BaseControl","useEffect","useState","SortFieldSelector","_ref","_s","viewId","onChange","sortField","labels","selectSortField","sort","defaultOption","value","label","_useState","_useState2","_slicedToArray","options","setOptions","_useState3","_useState4","selectedSortField","setSelectedSortField","fetchData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","text","parser","doc","optionElements","newOptions","selectedOption","wrap","_callee$","_context","prev","next","fetch","gkGravityViewBlocks","ajax_url","method","headers","body","URLSearchParams","action","nonce","viewid","sent","status","DOMParser","parseFromString","querySelectorAll","Array","from","map","option","textContent","concat","_toConsumableArray","find","console","error","t0","stop","_x","apply","arguments","createElement","className","placeholder","menuPortalTarget","document","styles","menuPortal","base","_objectSpread","zIndex","e","noOptionsMessage","_c","$RefreshReg$"],"sourceRoot":""}