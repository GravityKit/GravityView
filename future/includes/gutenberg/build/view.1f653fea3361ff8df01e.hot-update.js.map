{"version":3,"file":"view.1f653fea3361ff8df01e.hot-update.js","mappings":"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","sources":["webpack://gk-gravityview-blocks/./shared/js/sort-selector.js","webpack://gk-gravityview-blocks/webpack/runtime/getFullHash"],"sourcesContent":["import { __ } from '@wordpress/i18n';\nimport Select from 'react-select';\nimport { BaseControl } from '@wordpress/components';\nimport { useEffect } from 'react';\n\n\nexport default function ViewSelector( { viewId, isSidebar, onChange } ) {\n\tconst labels = {\n\t\tselectSortField: __( 'Select a Sort Field', 'gk-gravityview' ),\n\t\tsort: __( 'Sort', 'gk-gravityview' )\n\t};\n\n    const fields = [\n        {\n            value: '',\n            label: labels.selectSortField\n        }\n    ];\n    \n    const [options, setOptions] = useState(fields);\n    \n    const fetchData = async ( viewId ) => {\n        try {\n            const response = await fetch( gkGravityViewBlocks.ajax_url, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                body: new URLSearchParams({ \n                    action: 'gv_sortable_fields',\n                    nonce: gkGravityViewBlocks.nonce,\n                    viewid: viewId \n                })\n            });\n    \n            if (response.status === 200) {\n                const text = await response.text();\n                const parser = new DOMParser();\n                const doc = parser.parseFromString(text, 'text/html');\n                const optionElements = doc.querySelectorAll('option');\n                const newOptions = Array.from(optionElements).map(option => ({\n                    value: option.value,\n                    label: option.textContent\n                }));\n                setOptions(newOptions);\n            } else {\n                console.error('Error:', response);\n            }\n        } catch (error) {\n            console.error('Fetch error:', error);\n        }\n    };\n    \n    useEffect(() => {\n        fetchData(viewId);\n    }, [viewId]);\n    \n    const selectedSortField = options.find(option => option.value === viewId) || options[0];\n    \n    return (\n        <BaseControl className={`view-selector ${viewId && isSidebar ? 'edit-view' :''}`} label={ labels.sort }>\n            <Select\n                aria-label={ labels.sort }\n                placeholder={ labels.selectSortField }\n                menuPortalTarget={ document.body }\n                styles={ { menuPortal: base => ( { ...base, zIndex: 10 } ) } } // A higher z-index is needed to ensure other editor elements don't overlap the dropdown.\n                value={ selectedSortField }\n                options={ options }\n                onChange={ ( e ) => onChange( e.value ) }\n                noOptionsMessage={ () => __( 'No Views found', 'gk-gravityview' ) }\n            />\n        </BaseControl>\n    );\n    }\n    ","__webpack_require__.h = function() { return \"0fb5129f3b5142ddfb2b\"; }"],"names":["__","Select","BaseControl","useEffect","ViewSelector","_ref","_s","viewId","isSidebar","onChange","labels","selectSortField","sort","fields","value","label","_useState","useState","_useState2","_slicedToArray","options","setOptions","fetchData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","text","parser","doc","optionElements","newOptions","wrap","_callee$","_context","prev","next","fetch","gkGravityViewBlocks","ajax_url","method","headers","body","URLSearchParams","action","nonce","viewid","sent","status","DOMParser","parseFromString","querySelectorAll","Array","from","map","option","textContent","console","error","t0","stop","_x","apply","arguments","selectedSortField","find","createElement","className","concat","placeholder","menuPortalTarget","document","styles","menuPortal","base","_objectSpread","zIndex","e","noOptionsMessage","_c","$RefreshReg$"],"sourceRoot":""}