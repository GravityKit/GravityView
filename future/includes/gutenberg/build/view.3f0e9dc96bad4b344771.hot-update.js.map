{"version":3,"file":"view.3f0e9dc96bad4b344771.hot-update.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAqC;AACH;AACkB;AACR;AACa;AACW;AAGrD,SAASS,iBAAiBA,CAAAC,IAAA,EAAkC;EAAAC,EAAA;EAAA,IAA/BC,MAAM,GAAAF,IAAA,CAANE,MAAM;IAAEC,SAAS,GAAAH,IAAA,CAATG,SAAS;IAAEC,QAAQ,GAAAJ,IAAA,CAARI,QAAQ;EACtE,IAAMC,MAAM,GAAG;IACdC,eAAe,EAAEhB,mDAAE,CAAC,qBAAqB,EAAE,gBAAgB,CAAC;IAC5DiB,IAAI,EAAEjB,mDAAE,CAAC,MAAM,EAAE,gBAAgB;EAClC,CAAC;EAED,IAAMkB,MAAM,GAAG,CACd;IACCC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAEL,MAAM,CAACC;EACf,CAAC,CACD;EAED,IAAAK,SAAA,GAA8BjB,+CAAQ,CAACc,MAAM,CAAC;IAAAI,UAAA,GAAAC,gFAAA,CAAAF,SAAA;IAAvCG,OAAO,GAAAF,UAAA;IAAEG,UAAU,GAAAH,UAAA;EAC1B,IAAAI,YAAA,GAAqBpB,4DAAW,CAAC,aAAa,CAAC;IAAvCqB,QAAQ,GAAAD,YAAA,CAARC,QAAQ;EAChB,IAAMC,iBAAiB,GAAGvB,0DAAS,CAClC,UAACwB,MAAM;IAAA,IAAAC,qBAAA;IAAA,QAAAA,qBAAA,GACND,MAAM,CAACrB,0DAAgB,CAAC,CAACuB,sBAAsB,CAAC,MAAM,CAAC,cAAAD,qBAAA,uBAAvDA,qBAAA,CAAyDE,SAAS;EAAA,GACnE,EACD,CAAC;EAED,IAAMC,SAAS;IAAA,IAAAC,KAAA,GAAAC,mFAAA,eAAAC,sEAAA,CAAG,SAAAE,QAAO1B,MAAM;MAAA,IAAA2B,QAAA,EAAAC,IAAA,EAAAC,MAAA,EAAAC,GAAA,EAAAC,cAAA,EAAAC,UAAA;MAAA,OAAAR,sEAAA,UAAAU,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAE,IAAA;YAAA,OAENC,KAAK,CAACC,mBAAmB,CAACC,QAAQ,EAAE;cAC1DC,MAAM,EAAE,MAAM;cACdC,OAAO,EAAE;gBACR,cAAc,EAAE;cACjB,CAAC;cACDC,IAAI,EAAE,IAAIC,eAAe,CAAC;gBACzBC,MAAM,EAAE,oBAAoB;gBAC5BC,KAAK,EAAEP,mBAAmB,CAACO,KAAK;gBAChCC,MAAM,EAAE/C;cACT,CAAC;YACF,CAAC,CAAC;UAAA;YAVI2B,QAAQ,GAAAQ,QAAA,CAAAa,IAAA;YAAA,MAYVrB,QAAQ,CAACsB,MAAM,KAAK,GAAG;cAAAd,QAAA,CAAAE,IAAA;cAAA;YAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OACPV,QAAQ,CAACC,IAAI,CAAC,CAAC;UAAA;YAA5BA,IAAI,GAAAO,QAAA,CAAAa,IAAA;YACJnB,MAAM,GAAG,IAAIqB,SAAS,CAAC,CAAC;YACxBpB,GAAG,GAAGD,MAAM,CAACsB,eAAe,CAACvB,IAAI,EAAE,WAAW,CAAC;YAC/CG,cAAc,GAAGD,GAAG,CAACsB,gBAAgB,CAAC,QAAQ,CAAC;YAC/CpB,UAAU,GAAGqB,KAAK,CAACC,IAAI,CAACvB,cAAc,CAAC,CAACwB,GAAG,CAAC,UAACC,MAAM;cAAA,OAAM;gBAC9DjD,KAAK,EAAEiD,MAAM,CAACjD,KAAK;gBACnBC,KAAK,EAAEgD,MAAM,CAACC;cACf,CAAC;YAAA,CAAC,CAAC;YAEH5C,UAAU,EAAEP,MAAM,CAAC,CAAC,CAAC,EAAAoD,MAAA,CAAAC,oFAAA,CAAK3B,UAAU,EAAC,CAAC;YAACG,QAAA,CAAAE,IAAA;YAAA;UAAA;YAEvCuB,OAAO,CAACC,KAAK,CAAC,QAAQ,EAAElC,QAAQ,CAAC;UAAC;YAAAQ,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAA2B,EAAA,GAAA3B,QAAA;YAGnCyB,OAAO,CAACC,KAAK,CAAC,cAAc,EAAA1B,QAAA,CAAA2B,EAAO,CAAC;UAAC;UAAA;YAAA,OAAA3B,QAAA,CAAA4B,IAAA;QAAA;MAAA,GAAArC,OAAA;IAAA,CAEtC;IAAA,gBA/BKL,SAASA,CAAA2C,EAAA;MAAA,OAAA1C,KAAA,CAAA2C,KAAA,OAAAC,SAAA;IAAA;EAAA,GA+Bd;EAED3E,gDAAS,CAAC,YAAM;IACf8B,SAAS,CAACrB,MAAM,CAAC;EAClB,CAAC,EAAE,CAACA,MAAM,CAAC,CAAC;EAET,IAAMmE,YAAY,GAAG,SAAfA,YAAYA,CAAIC,cAAc,EAAK;IACrClE,QAAQ,CAACkE,cAAc,CAAC7D,KAAK,CAAC;IAC9BQ,QAAQ,CAAC;MAAEsD,IAAI,EAAE;QAAEjD,SAAS,EAAEgD,cAAc,CAAC7D;MAAM;IAAE,CAAC,CAAC;EAC3D,CAAC;EAEJ,OACC+D,oDAAA,CAAChF,8DAAW;IAACiF,SAAS,EAAC,qBAAqB;IAAC/D,KAAK,EAAEL,MAAM,CAACE;EAAK,GAC/DiE,oDAAA,CAACjF,qDAAM;IACN,cAAYc,MAAM,CAACE,IAAK;IACxBmE,WAAW,EAAErE,MAAM,CAACC,eAAgB;IACpCqE,gBAAgB,EAAEC,QAAQ,CAAC/B,IAAK;IAChCgC,MAAM,EAAE;MAAEC,UAAU,EAAE,SAAAA,WAACC,IAAI;QAAA,OAAAC,aAAA,CAAAA,aAAA,KAAWD,IAAI;UAAEE,MAAM,EAAE;QAAE;MAAA;IAAI,CAAE,CAAC;IAAA;IACjDxE,KAAK,EAAGK,OAAO,CAACoE,IAAI,CAAC,UAAAxB,MAAM;MAAA,OAAIA,MAAM,CAACjD,KAAK,KAAKS,iBAAiB;IAAA,EAAC,IAAIV,MAAM,CAAC,CAAC,CAAG;IAC7FM,OAAO,EAAEA,OAAQ;IACLV,QAAQ,EAAGiE,YAAc;IACrCc,gBAAgB,EAAE,SAAAA,iBAAA;MAAA,OAAM7F,mDAAE,CAAC,yBAAyB,EAAE,gBAAgB,CAAC;IAAA;EAAC,CACxE,CACW,CAAC;AAEhB;AAACW,EAAA,CA7EuBF,iBAAiB;EAAA,QAcnBH,wDAAW,EACND,sDAAS;AAAA;AAAAyF,EAAA,GAfZrF,iBAAiB;AAAA,IAAAqF,EAAA;AAAAC,sCAAA,CAAAD,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCRzC,qCAAqC","sources":["webpack://gk-gravityview-blocks/./shared/js/sort-selector.js","webpack://gk-gravityview-blocks/webpack/runtime/getFullHash"],"sourcesContent":["import { __ } from \"@wordpress/i18n\";\nimport Select from \"react-select\";\nimport { BaseControl } from \"@wordpress/components\";\nimport { useEffect, useState } from \"react\";\nimport { useSelect, useDispatch } from \"@wordpress/data\";\nimport { store as blockEditorStore } from \"@wordpress/block-editor\";\n\n\nexport default function SortFieldSelector({ viewId, isSidebar, onChange }) {\n\tconst labels = {\n\t\tselectSortField: __(\"Select a Sort Field\", \"gk-gravityview\"),\n\t\tsort: __(\"Sort\", \"gk-gravityview\"),\n\t};\n\n\tconst fields = [\n\t\t{\n\t\t\tvalue: \"\",\n\t\t\tlabel: labels.selectSortField,\n\t\t},\n\t];\n\n\tconst [options, setOptions] = useState(fields);\n\tconst { editPost } = useDispatch(\"core/editor\");\n\tconst selectedSortField = useSelect(\n\t\t(select) =>\n\t\t\tselect(blockEditorStore).getEditedPostAttribute(\"meta\")?.sortField,\n\t\t[],\n\t);\n\n\tconst fetchData = async (viewId) => {\n\t\ttry {\n\t\t\tconst response = await fetch(gkGravityViewBlocks.ajax_url, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t},\n\t\t\t\tbody: new URLSearchParams({\n\t\t\t\t\taction: \"gv_sortable_fields\",\n\t\t\t\t\tnonce: gkGravityViewBlocks.nonce,\n\t\t\t\t\tviewid: viewId,\n\t\t\t\t}),\n\t\t\t});\n\n\t\t\tif (response.status === 200) {\n\t\t\t\tconst text = await response.text();\n\t\t\t\tconst parser = new DOMParser();\n\t\t\t\tconst doc = parser.parseFromString(text, \"text/html\");\n\t\t\t\tconst optionElements = doc.querySelectorAll(\"option\");\n\t\t\t\tconst newOptions = Array.from(optionElements).map((option) => ({\n\t\t\t\t\tvalue: option.value,\n\t\t\t\t\tlabel: option.textContent,\n\t\t\t\t}));\n\n\t\t\t\tsetOptions([fields[0], ...newOptions]);\n\t\t\t} else {\n\t\t\t\tconsole.error(\"Error:\", response);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Fetch error:\", error);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfetchData(viewId);\n\t}, [viewId]);\n\n    const handleChange = (selectedOption) => {\n        onChange(selectedOption.value);\n        editPost({ meta: { sortField: selectedOption.value } });\n    };\n    \n\treturn (\n\t\t<BaseControl className=\"sort-field-selector\" label={labels.sort}>\n\t\t\t<Select\n\t\t\t\taria-label={labels.sort}\n\t\t\t\tplaceholder={labels.selectSortField}\n\t\t\t\tmenuPortalTarget={document.body}\n\t\t\t\tstyles={{ menuPortal: (base) => ({ ...base, zIndex: 10 }) }} // A higher z-index is needed to ensure other editor elements don't overlap the dropdown.\n                value={ options.find(option => option.value === selectedSortField) || fields[0] }\n\t\t\t\toptions={options}\n                onChange={ handleChange }\n\t\t\t\tnoOptionsMessage={() => __(\"No Sorting Fields found\", \"gk-gravityview\")}\n\t\t\t/>\n\t\t</BaseControl>\n\t);\n}\n","__webpack_require__.h = function() { return \"48e53fcf2a424fe51ee9\"; }"],"names":["__","Select","BaseControl","useEffect","useState","useSelect","useDispatch","store","blockEditorStore","SortFieldSelector","_ref","_s","viewId","isSidebar","onChange","labels","selectSortField","sort","fields","value","label","_useState","_useState2","_slicedToArray","options","setOptions","_useDispatch","editPost","selectedSortField","select","_select$getEditedPost","getEditedPostAttribute","sortField","fetchData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","text","parser","doc","optionElements","newOptions","wrap","_callee$","_context","prev","next","fetch","gkGravityViewBlocks","ajax_url","method","headers","body","URLSearchParams","action","nonce","viewid","sent","status","DOMParser","parseFromString","querySelectorAll","Array","from","map","option","textContent","concat","_toConsumableArray","console","error","t0","stop","_x","apply","arguments","handleChange","selectedOption","meta","createElement","className","placeholder","menuPortalTarget","document","styles","menuPortal","base","_objectSpread","zIndex","find","noOptionsMessage","_c","$RefreshReg$"],"sourceRoot":""}