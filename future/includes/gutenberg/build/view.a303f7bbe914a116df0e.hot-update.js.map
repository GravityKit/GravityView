{"version":3,"file":"view.a303f7bbe914a116df0e.hot-update.js","mappings":"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","sources":["webpack://gk-gravityview-blocks/./shared/js/sort-selector.js","webpack://gk-gravityview-blocks/webpack/runtime/getFullHash"],"sourcesContent":["import { __ } from '@wordpress/i18n';\nimport Select from 'react-select';\nimport { BaseControl } from '@wordpress/components';\nimport { useEffect, useState } from 'react';\n\n\nexport default function SortFieldSelector( { viewId, isSidebar, onChange, sortField } ) {\n\n    const labels = { selectSortField: __( 'Select a Sort Field', 'gk-gravityview' ), sort: __( 'Sort', 'gk-gravityview' ) };\n\n\n\n    const defaultOption = { value: '', label: labels.selectSortField };\n\n    const [options, setOptions] = useState([defaultOption]);\n    const [selectedSortField, setSelectedSortField] = useState(defaultOption);\n    \n    const fetchData = async ( viewId ) => {\n        try {\n            const response = await fetch( gkGravityViewBlocks.ajax_url, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                body: new URLSearchParams({ \n                    action: 'gv_sortable_fields',\n                    nonce: gkGravityViewBlocks.nonce,\n                    viewid: viewId \n                })\n            });\n    \n            if (response.status === 200) {\n                const text = await response.text();\n                const parser = new DOMParser();\n                const doc = parser.parseFromString(text, 'text/html');\n                const optionElements = doc.querySelectorAll('option');\n                const newOptions = Array.from(optionElements).map(option => ({\n                    value: option.value,\n                    label: option.textContent\n                }));\n    \n                setOptions([defaultOption, ...newOptions]);\n                const selectedOption = newOptions.find(option => option.value === sortField) || defaultOption;\n                setSelectedSortField(selectedOption);\n            } else {\n                console.error('Error:', response);\n            }\n        } catch (error) {\n            console.error('Fetch error:', error);\n        }\n    };\n    \n    useEffect(() => {\n        fetchData(viewId);\n    }, [viewId]);\n    console.log(selectedSortField);\n    return (\n        <BaseControl className=\"sort-field-selector\" label={ labels.sort }>\n            <Select\n                aria-label={ labels.sort }\n                placeholder={ labels.selectSortField }\n                menuPortalTarget={ document.body }\n                styles={ { menuPortal: base => ( { ...base, zIndex: 10 } ) } }\n                options={ options }\n                value={ selectedSortField }\n                onChange={ ( e ) => {\n                    onChange( e.value );\n                    setSelectedSortField( e );\n                } }\n                noOptionsMessage={ () => __( 'No Sorting Fields found', 'gk-gravityview' ) }\n            />\n        </BaseControl>\n    );\n\n}    ","__webpack_require__.h = function() { return \"64664693cc2e25af8211\"; }"],"names":["__","Select","BaseControl","useEffect","useState","SortFieldSelector","_ref","_s","viewId","isSidebar","onChange","sortField","labels","selectSortField","sort","defaultOption","value","label","_useState","_useState2","_slicedToArray","options","setOptions","_useState3","_useState4","selectedSortField","setSelectedSortField","fetchData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","text","parser","doc","optionElements","newOptions","selectedOption","wrap","_callee$","_context","prev","next","fetch","gkGravityViewBlocks","ajax_url","method","headers","body","URLSearchParams","action","nonce","viewid","sent","status","DOMParser","parseFromString","querySelectorAll","Array","from","map","option","textContent","concat","_toConsumableArray","find","console","error","t0","stop","_x","apply","arguments","log","createElement","className","placeholder","menuPortalTarget","document","styles","menuPortal","base","_objectSpread","zIndex","e","noOptionsMessage","_c","$RefreshReg$"],"sourceRoot":""}